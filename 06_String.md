###  문자열 처리

---

빅데이터: 많은 양의 데이터

**3V**

1. Volume: 정해진 시간 내에 처리할 수 없는 많은 양의 데이터
2. Velocity:     데이터 생성 속도 

3. Variety: 다양성

 #

- 일반적으로 빅데이터 처리는 문자열 처리를 동반하는 경우가 많음
- **문자열** **처리**는 **stringr** package를 이용하면 쉽고 편하게 가능

 #

```r
var1 = "Honggd1234Leess9032YOU25최길동2009"
```

 #

1. 문자열 길이: **`str_length()`**

   ```r
str_length( var1 )  # 31
   					# 한 글자도 하나로 인식
   ```

 #

2. 찾는 문자열이 시작과 끝을 알려주는 것: **`str_locate()`**

   ```r
str_locate( var1, "9032")
   class(str_locate( var1, "9032"))  # matrix
   ```
   
   

| 자료구조 알려주는 함수    | **`class( )`** |
| ------------------------- | -------------- |
| 데이터 타입 알려주는 함수 | **`mode( )`**  |

 #

3. 부분문자열 구해보기: **`str_sub()`**

   ```r
str_sub( var1, 3, 8 ) # nggd12
   					  # 처음과 끝 포함됨
   ```

 #

4. 대소문자 변경

   ```r
str_to_lower( var1 )
   str_to_upper( var1 )
   ```

 #

5. 문자열 교체

   ```r
str_replace( var1, "Hong", "Kim" )
   str_replace_all( var1, "Hong", "Kim" )
   ```

 #

6. 문자열 결합1: **`str_c()`**

   ```r
var2 = "홍"
   var3 = "길동"
str_c( var2, var3 )
   ```

 #

7. 문자열 결합2: **`paste()`**

   ```r
var1 = c( "홍", "김", "최" )
   paste( var1, cp;;apse = "-" )   # 데이터 구조: list
```

 #

8. 문자열 분할: 

   ```r
var1 = "Honggd1234,Leess99032,YOU25,최길동2009"
   str_split( var1, "," )    # 데이터 구조: list
```

 #

### 정규 표현식( regular expression )

---

- 문자열 처리 쉽고 편하기 하기 위함

  ```r
  var1 = "Honggd1234,Leess99032,YOU25,최길동2009"
  ```

- 문자열 추출: **`str_extract()`** / **`str_extract_all()`**

 #

1. 조건에 부합되는 문자열 추출

| `str_extract(  var1, "[a-z]{4}" )`       | 연속된 소문자 4글자만 추출<br />ongg                |
| ---------------------------------------- | --------------------------------------------------- |
| `str_extract_all(  var1, "[a-z]{4}" )`   | 연속된 소문자 4글자 모두 추출<br /> ongg eess       |
| `str_extract_all(  var1, "[a-z]{2}" )`   | 연속된 소문자 2글자 모두 추출<br />on gg ee   ss    |
| `str_extract_all( var1,  "[a-z]{2,}" )`  | 연속된 소문자 2글자 이상 모두 추출<br /> onggd eess |
| `str_extract_all( var1,  "[a-z]{2,3}" )` | 연속된 소문자 2~3글자 모두 추출<br />ong gd ees     |

 #

2. 한글만 추출

| `str_extract_all( var1,  "[가-힣]{2,}" )` | 연속된 한글 2글자 이상 모두 추출<br />최길동 |
| ----------------------------------------- | -------------------------------------------- |
|                                           |                                              |

 #

3. 숫자만 추출

| `str_extract_all( var1,  "[0-9]{2,}" )` | 연속된 숫자 2글자 이상 모두 추출<br />1234 99032   25 2009 |
| --------------------------------------- | ---------------------------------------------------------- |
|                                         |                                                            |

 #

4. 한글 제외한 나머지 문자 추출

   ```r
   str_extract_all( var1, "[A-Za-z0-9]{2,}" )
   str_extract_all( var1, "[^가-힣]{5}" )
   
   # ※ str_extract_all( var1, "^[가-힣]" )
   # list 형태로 저장되어 보기 힘듦
   # [[1]]
   #  [1] "H" "o" "n" "g" "g" "d" "1" "2" "3" "4" "," "L" "e" "e" "s" "s" "9" "9" "0" "3"
   #  [21] "2" "," "Y" "O" "U" "2" "5" "," "2" "0" "0" "9"
   ```

    ```r
   pasta( a[[1]], collapse = "" )로 보기 편하게 정리
   
   # "Honggd1234,Leess99032,YOU25,2009"
    ```

#

- 주민등록번호 검사

  ```r
  myId <- "801112-1210419"
  
  str_extract_all( myId, "[0-9]{6}-[1234][0-9]{6}" )
  				# 조건에 맞으면 return됨
  ```

  

 



 